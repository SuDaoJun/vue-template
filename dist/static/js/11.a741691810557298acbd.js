webpackJsonp([11],{"7Etx":function(e,t){},KbiL:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("qGD+"),i=a("W2KW"),r=a("4/BI"),n=a.n(r),l={data:function(){var e=this;return{other:{ref:"table"},dialogBox:{boxShow:!1,isEdit:!1,idItem:""},pageObj:{pageSize:8,total:0,currentPage:1},tableData:[],formConfig:{labelWidth:"80px",ref:"formModel",inline:!0,lablePosition:"right",marginRight:"10px",formItemList:[{type:"text",prop:"id",width:"180px",label:"ID",placeholder:"ID"},{type:"text",prop:"name",width:"180px",label:"角色名称",placeholder:"角色名称"}],operate:[{name:"查询",handleClick:this.getDataList},{name:"添加",handleClick:this.addData},{name:"重置",type:"transparent",handleClick:this.resetForm}],formModel:{id:"",name:""}},formConfigs:{labelWidth:"80px",ref:"formModels",lablePosition:"right",marginRight:"10px",formItemList:[{type:"text",prop:"id",width:"450px",label:"ID",placeholder:"ID"},{type:"text",prop:"name",width:"450px",label:"角色名称",placeholder:"角色名称"}],formModel:{id:"",name:""},rules:{id:[{required:!0,validator:n.a.FormValidate.Form("ID").NoEmpty,trigger:"blur"}],name:[{required:!0,validator:n.a.FormValidate.Form("角色名称").NoEmpty,trigger:"blur"}]}},columns:[{prop:"id",label:"ID"},{prop:"name",label:"角色名称"},{prop:"operate",align:"center",label:"操作",render:function(t,a){return t("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"}},[t("div",{style:{color:"#005da9",padding:"0 10px",cursor:"pointer"},on:{click:function(){e.dialogBox.idItem=a.row.id,e.editData(a)}}},"编辑"),t("div",{style:{color:"#e36319",padding:"0 10px",cursor:"pointer"},on:{click:function(){e.dialogBox.idItem=a.row.id,e.deleteData()}}},"删除")])}}]}},created:function(){},mounted:function(){this.getDataList()},methods:{getDataList:function(e){var t=this;this.pageObj.currentPage=!0===e?this.pageObj.currentPage:1;this.formConfig.formModel;this.$axios.get("/role",{params:{page:this.pageObj.currentPage.toString(),rows:this.pageObj.pageSize.toString()}}).then(function(e){t.pageObj.total=e.data.list.count,t.tableData=e.data.list.data})},addData:function(e){this.formConfigs.formModel={time:"",timeRange:[],area:null,name:""},this.$refs.formModels&&this.$refs.formModels.$refs.formModels.resetFields(),this.dialogBox.isEdit=!1,this.dialogBox.boxShow=!0},deleteData:function(){var e=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$axios.delete("/role/"+e.dialogBox.idItem).then(function(t){e.getDataList()})})},editData:function(e){this.$refs.formModels&&this.$refs.formModels.$refs.formModels.resetFields(),this.formConfigs.formModel={time:e.row.time,timeRange:e.row.timeRange,area:e.row.area,name:e.row.name},this.dialogBox.isEdit=!0,this.dialogBox.boxShow=!0},confirSubmit:function(){var e=this;this.$refs.formModels.$refs.formModels.validate(function(t){if(t){var a=e.formConfigs.formModel;e.dialogBox.isEdit?e.$axios.post("/table/edit",{id:e.dialogBox.idItem,time:a.time,timeRange:a.timeRange.join(","),area:a.area,name:a.name}).then(function(t){e.dialogBox.boxShow=!1,e.getDataList()}):e.$axios.post("/table/add",{time:a.time,timeRange:a.timeRange.join(","),area:a.area,name:a.name}).then(function(t){e.dialogBox.boxShow=!1,e.getDataList()})}else e.$message.closeAll(),e.$message.warning("信息校验失败")})},pageChange:function(e){this.pageObj.currentPage=e,this.getDataList(!0)},resetForm:function(e){this.$refs[e].$refs[e].resetFields()}},components:{MyTable:o.a,MyForm:i.a},computed:{}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"index-analysis"},[a("h2",[e._v("查询表格")]),e._v(" "),a("div",{staticClass:"analysis-table"},[a("my-form",{ref:e.formConfig.ref,attrs:{formConfig:e.formConfig}}),e._v(" "),a("my-table",{ref:e.other.ref,attrs:{data:e.tableData,columns:e.columns,other:e.other}}),e._v(" "),a("div",{staticClass:"page-list"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.pageObj.currentPage,"page-size":e.pageObj.pageSize,total:e.pageObj.total},on:{"update:currentPage":function(t){return e.$set(e.pageObj,"currentPage",t)},"update:current-page":function(t){return e.$set(e.pageObj,"currentPage",t)},"current-change":e.pageChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogBox.isEdit?"编辑数据":"新增数据",visible:e.dialogBox.boxShow,width:"640px"},on:{"update:visible":function(t){return e.$set(e.dialogBox,"boxShow",t)}}},[a("my-form",{ref:e.formConfigs.ref,attrs:{formConfig:e.formConfigs}}),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogBox.boxShow=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.confirSubmit}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var d=a("VU/8")(l,s,!1,function(e){a("7Etx")},"data-v-329872cb",null);t.default=d.exports}});