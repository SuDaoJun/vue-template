webpackJsonp([1],{"4Lha":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Xxa5"),i=a.n(n),s=a("exGp"),r=a.n(s),o=a("BO1k"),l=a.n(o),c=a("Dd8w"),u=a.n(c),h={name:"ScrollPane",data:function(){return{left:0}},computed:{scrollWrapper:function(){return this.$refs.scrollContainer.$refs.wrap}},methods:{handleScroll:function(t){var e=t.wheelDelta||40*-t.deltaY,a=this.scrollWrapper;a.scrollLeft=a.scrollLeft+e/4},moveToTarget:function(t){var e=this.$refs.scrollContainer.$el.offsetWidth,a=this.scrollWrapper,n=this.$parent.$refs.tag,i=null,s=null;if(n.length>0&&(i=n[0],s=n[n.length-1]),i===t)a.scrollLeft=0;else if(s===t)a.scrollLeft=a.scrollWidth-e;else{var r=n.findIndex(function(e){return e===t}),o=n[r-1],l=n[r+1],c=l.$el.offsetLeft+l.$el.offsetWidth+4,u=o.$el.offsetLeft-4;c>a.scrollLeft+e?a.scrollLeft=c-e:u<a.scrollLeft&&(a.scrollLeft=u)}}}},d={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("el-scrollbar",{ref:"scrollContainer",staticClass:"scroll-container",attrs:{vertical:!1},nativeOn:{wheel:function(e){return e.preventDefault(),t.handleScroll(e)}}},[t._t("default")],2)},staticRenderFns:[]};var f={components:{ScrollPane:a("VU/8")(h,d,!1,function(t){a("SQMo")},"data-v-610bf064",null).exports},data:function(){return{visible:!1,top:0,left:0,selectedTag:{},affixTags:[]}},computed:{visitedViews:function(){return this.$store.getters.getVisitedViews},routes:function(){return this.$store.getters.getTotalRoutes}},watch:{$route:function(){this.addTags(),this.moveToCurrentTag()},visible:function(t){t?document.body.addEventListener("click",this.closeMenu):document.body.removeEventListener("click",this.closeMenu)}},mounted:function(){this.initTags(),this.addTags()},methods:{isActive:function(t){return t.path===this.$route.path},filterAffixTags:function(t){var e=[];return t.forEach(function(t){if(t.meta&&t.meta.affix){var a=t.children[0];e.push({fullPath:a.path,path:a.path,name:a.name,meta:u()({},a.meta)})}}),e},initTags:function(){var t=this.affixTags=this.filterAffixTags(this.routes),e=!0,a=!1,n=void 0;try{for(var i,s=l()(t);!(e=(i=s.next()).done);e=!0){var r=i.value;this.$store.dispatch("addTags",r)}}catch(t){a=!0,n=t}finally{try{!e&&s.return&&s.return()}finally{if(a)throw n}}},addTags:function(){return this.$route.name&&this.$store.dispatch("addTags",this.$route),!1},moveToCurrentTag:function(){var t=this,e=this.$refs.tag;this.$nextTick(function(){var a=!0,n=!1,i=void 0;try{for(var s,r=l()(e);!(a=(s=r.next()).done);a=!0){var o=s.value;if(o.to.path===t.$route.path){t.$refs.scrollPane.moveToTarget(o),o.to.fullPath!==t.$route.fullPath&&t.$store.dispatch("updateTags",t.$route);break}}}catch(t){n=!0,i=t}finally{try{!a&&r.return&&r.return()}finally{if(n)throw i}}})},refreshSelectedTag:function(t){var e=this,a=t.fullPath;this.$nextTick(function(){e.$router.replace({path:"/redirect"+a})})},closeSelectedTag:function(t){var e=this;this.$store.dispatch("delTags",t).then(function(a){e.isActive(t)&&e.toLastView(a,t)})},closeOthersTags:function(){var t=this;this.$router.push(this.selectedTag),this.$store.dispatch("delOthersTags",this.selectedTag).then(function(){t.moveToCurrentTag()})},closeAllTags:function(t){var e=this;this.$store.dispatch("delAllTags").then(function(a){e.affixTags.some(function(e){return e.path===t.path})||e.toLastView(a,t)})},toLastView:function(t,e){var a=t.slice(-1)[0];a?this.$router.push(a):"index"===e.name?this.$router.replace({path:"/redirect"+e.fullPath}):this.$router.push("/")},openMenu:function(t,e){var a=this.$el.getBoundingClientRect().left,n=this.$el.offsetWidth-105,i=e.clientX-a+15;this.left=i>n?n:i,this.top=e.clientY,this.visible=!0,this.selectedTag=t},closeMenu:function(){this.visible=!1}}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tags-view-container"},[a("scroll-pane",{ref:"scrollPane",staticClass:"tags-view-wrapper"},t._l(t.visitedViews,function(e){return a("router-link",{key:e.path,ref:"tag",refInFor:!0,staticClass:"tags-view-item",class:t.isActive(e)?"active":"",attrs:{to:{path:e.path,query:e.query,fullPath:e.fullPath},tag:"span"},nativeOn:{mouseup:function(a){return"button"in a&&1!==a.button?null:t.closeSelectedTag(e)},contextmenu:function(a){return a.preventDefault(),t.openMenu(e,a)}}},[t._v("\n      "+t._s(e.title)+"\n      "),e.meta.affix?t._e():a("span",{staticClass:"el-icon-close",on:{click:function(a){return a.preventDefault(),a.stopPropagation(),t.closeSelectedTag(e)}}})])}),1),t._v(" "),a("ul",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"contextmenu",style:{left:t.left+"px",top:t.top+"px"}},[a("li",{on:{click:function(e){return t.refreshSelectedTag(t.selectedTag)}}},[t._v("\n      刷新\n    ")]),t._v(" "),t.selectedTag.meta&&t.selectedTag.meta.affix?t._e():a("li",{on:{click:function(e){return t.closeSelectedTag(t.selectedTag)}}},[t._v("\n      关闭\n    ")]),t._v(" "),a("li",{on:{click:t.closeOthersTags}},[t._v("\n      关闭其它\n    ")]),t._v(" "),a("li",{on:{click:function(e){return t.closeAllTags(t.selectedTag)}}},[t._v("\n      关闭所有\n    ")])])],1)},staticRenderFns:[]};var m=a("VU/8")(f,v,!1,function(t){a("ewiy")},"data-v-1e8e02cf",null).exports,p={name:"MenuItem",props:{totalRoutes:{type:Array,required:!0}},data:function(){return{iconHide:!1}},created:function(){},mounted:function(){},methods:{resolvePath:function(t){return"/"==t?"/index":t}},computed:{}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"menu-item"},t._l(t.totalRoutes,function(e){return a("div",{key:e.path,staticClass:"menu-wraper"},[e.hidden?t._e():a("div",[e.children&&e.child?a("el-submenu",{attrs:{index:e.path,"popper-append-to-body":""}},[a("template",{slot:"title"},[a("i",{directives:[{name:"show",rawName:"v-show",value:e.meta.icon,expression:"item.meta.icon"}],class:e.meta.icon?"el-icon-"+e.meta.icon:"el-icon-setting"}),t._v(" "),a("span",[t._v(t._s(e.meta.title))])]),t._v(" "),a("menu-item",{attrs:{totalRoutes:e.children}})],2):a("el-menu-item",{attrs:{index:t.resolvePath(e.path)}},[a("i",{directives:[{name:"show",rawName:"v-show",value:e.meta.icon,expression:"item.meta.icon"}],class:e.meta.icon?"el-icon-"+e.meta.icon:"el-icon-setting"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.meta.title))])])],1)])}),0)},staticRenderFns:[]};var w={data:function(){return{drawer:!1,drawerSetting:!1,tagShow:!0,theme:!0,bredlList:[]}},created:function(){},mounted:function(){this.theme=!localStorage.getItem("propTheme")||"custom-light"==localStorage.getItem("propTheme"),this.tagShow=!localStorage.getItem("tagShow")||"false"!=localStorage.getItem("tagShow"),this.getBreadCrumb()},methods:{getBreadCrumb:function(){var t=this.$route.matched;t[0].path===t[1].path&&(t=this.$route.matched[0]),t="index"===this.$route.name?[{path:"/",meta:{title:"首页"}}]:[{path:"/",meta:{title:"首页"}}].concat(t),this.bredlList=t},handleLink:function(t){var e=t.redirect,a=t.path;e?this.$router.push(e):this.$router.push(a)},menuRefresh:function(t,e){var a=this;t===this.$route.fullPath&&this.$nextTick(function(){a.$router.replace({path:"/redirect"+t})})},drawerOpen:function(){this.drawer=!0},logoIndex:function(){this.$router.push({path:"/"})},colorChange:function(t){this.theme=t,t?(document.body.setAttribute("data-theme","custom-light"),localStorage.setItem("propTheme","custom-light"),this.$router.replace({path:"/redirect"+this.$route.fullPath})):(document.body.setAttribute("data-theme","custom-dark"),localStorage.setItem("propTheme","custom-dark"),this.$router.replace({path:"/redirect"+this.$route.fullPath}))},tagChange:function(t){this.tagShow=t,localStorage.setItem("tagShow",this.tagShow)},handleCommand:function(t){var e=this;return r()(i.a.mark(function a(){return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(""!=t){a.next=3;break}a.next=7;break;case 3:if("logout"!=t){a.next=7;break}return a.next=6,e.$store.dispatch("logout");case 6:e.$router.push("/login?redirect="+e.$route.fullPath);case 7:case"end":return a.stop()}},a,e)}))()}},watch:{$route:function(t){this.getBreadCrumb()}},components:{TagsView:m,MenuItem:a("VU/8")(p,g,!1,function(t){a("PqMX")},"data-v-05a29396",null).exports},computed:{totalRoutes:function(){return this.$store.getters.getTotalRoutes}}},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"index-layout"},[a("div",{staticClass:"layout-sidebar"},[a("div",{staticClass:"sider-logo",on:{click:t.logoIndex}},[t._v("\n      Logo\n    ")]),t._v(" "),a("div",{staticClass:"sider-menu"},[a("el-scrollbar",{staticClass:"wrap-scroll",staticStyle:{height:"calc(100% - 64px)"}},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":t.$route.path,router:""},on:{select:t.menuRefresh}},[a("menu-item",{attrs:{totalRoutes:t.totalRoutes}})],1)],1)],1)]),t._v(" "),a("div",{staticClass:"layout-container"},[a("div",{staticClass:"container-header fixed-header"},[a("div",{staticClass:"info-header"},[a("el-breadcrumb",{staticClass:"header-breadcrumb",attrs:{separator:"/"}},[a("transition-group",{attrs:{name:"breadcrumb"}},t._l(t.bredlList,function(e,n){return a("el-breadcrumb-item",{key:e.path},[n==t.bredlList.length-1?a("span",{staticClass:"no-redirect"},[t._v(t._s(e.meta.title))]):a("a",{on:{click:function(a){return a.preventDefault(),t.handleLink(e)}}},[t._v(t._s(e.meta.title))])])}),1)],1),t._v(" "),a("div",{staticClass:"header-right"},[a("div",{staticClass:"right-notice",on:{click:t.drawerOpen}},[a("el-badge",{attrs:{value:12}},[a("i",{staticClass:"el-icon-bell"})])],1),t._v(" "),a("el-dropdown",{attrs:{placement:"bottom"},on:{command:t.handleCommand}},[a("div",{staticClass:"el-dropdown-link"},[a("el-avatar",{attrs:{icon:"el-icon-user-solid"}}),t._v(" "),a("span",[t._v("管理员")])],1),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"personal",icon:"el-icon-user"}},[t._v("个人中心")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"settings",icon:"el-icon-setting"}},[t._v("账户设置")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"logout",divided:"",icon:"el-icon-switch-button"}},[t._v("退出登录")])],1)],1)],1)],1),t._v(" "),a("tags-view",{directives:[{name:"show",rawName:"v-show",value:t.tagShow,expression:"tagShow"}]})],1),t._v(" "),a("el-scrollbar",{staticClass:"wrap-scroll",staticStyle:{height:"100vh"}},[a("div",{class:t.tagShow?"container-show":"container-show tag-show"},[a("transition",{attrs:{name:"fade-transform",mode:"out-in"}},[a("router-view")],1)],1)])],1),t._v(" "),a("div",{staticClass:"right-panel",on:{click:function(e){t.drawerSetting=!0}}},[a("i",{staticClass:"el-icon-setting"})]),t._v(" "),a("el-drawer",{attrs:{title:"配置中心",size:"260px",visible:t.drawerSetting},on:{"update:visible":function(e){t.drawerSetting=e}}},[a("div",{staticClass:"box-drawer"},[a("div",{staticClass:"drawer-item"},[a("span",[t._v("主题切换")]),t._v(" "),a("el-switch",{on:{change:t.colorChange},model:{value:t.theme,callback:function(e){t.theme=e},expression:"theme"}})],1),t._v(" "),a("div",{staticClass:"drawer-item"},[a("span",[t._v("开启Tags-View")]),t._v(" "),a("el-switch",{on:{change:t.tagChange},model:{value:t.tagShow,callback:function(e){t.tagShow=e},expression:"tagShow"}})],1)])]),t._v(" "),a("el-drawer",{attrs:{title:"消息中心",visible:t.drawer},on:{"update:visible":function(e){t.drawer=e}}},[a("p")])],1)},staticRenderFns:[]};var $=a("VU/8")(w,_,!1,function(t){a("hmA4")},"data-v-605e2d24",null);e.default=$.exports},PqMX:function(t,e){},SQMo:function(t,e){},ewiy:function(t,e){},hmA4:function(t,e){}});